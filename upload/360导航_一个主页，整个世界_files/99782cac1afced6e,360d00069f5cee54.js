(function(){function XPC(e){var t={isParent:parent==window,iframeName:"XPC_IFRAME"};this.options=mix(e||{},t,!1),this._initialize()}var JSON;JSON||(JSON={}),function(){function f(e){return e<10?"0"+e:e}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return typeof t=="string"?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,r,i,s,o=gap,u,a=t[e];a&&typeof a=="object"&&typeof a.toJSON=="function"&&(a=a.toJSON(e)),typeof rep=="function"&&(a=rep.call(t,e,a));switch(typeof a){case"string":return quote(a);case"number":return isFinite(a)?String(a):"null";case"boolean":case"null":return String(a);case"object":if(!a)return"null";gap+=indent,u=[];if(Object.prototype.toString.apply(a)==="[object Array]"){s=a.length;for(n=0;n<s;n+=1)u[n]=str(n,a)||"null";return i=u.length===0?"[]":gap?"[\n"+gap+u.join(",\n"+gap)+"\n"+o+"]":"["+u.join(",")+"]",gap=o,i}if(rep&&typeof rep=="object"){s=rep.length;for(n=0;n<s;n+=1)typeof rep[n]=="string"&&(r=rep[n],i=str(r,a),i&&u.push(quote(r)+(gap?": ":":")+i))}else for(r in a)Object.prototype.hasOwnProperty.call(a,r)&&(i=str(r,a),i&&u.push(quote(r)+(gap?": ":":")+i));return i=u.length===0?"{}":gap?"{\n"+gap+u.join(",\n"+gap)+"\n"+o+"}":"{"+u.join(",")+"}",gap=o,i}}"use strict",typeof Date.prototype.toJSON!="function"&&(Date.prototype.toJSON=function(e){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(e){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;typeof JSON.stringify!="function"&&(JSON.stringify=function(e,t,n){var r;gap="",indent="";if(typeof n=="number")for(r=0;r<n;r+=1)indent+=" ";else typeof n=="string"&&(indent=n);rep=t;if(!t||typeof t=="function"||typeof t=="object"&&typeof t.length=="number")return str("",{"":e});throw new Error("JSON.stringify")}),typeof JSON.parse!="function"&&(JSON.parse=function(text,reviver){function walk(e,t){var n,r,i=e[t];if(i&&typeof i=="object")for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(r=walk(i,n),r!==undefined?i[n]=r:delete i[n]);return reviver.call(e,t,i)}var j;text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),typeof reviver=="function"?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}();var mix=function(e,t,n){n=n||function(t,n,r){return e[r]||r in e?t:n},n===!0&&(n=function(e,t){return t});for(var r in t)e[r]=n(e[r],t[r],r,e,t),e[r]===undefined&&delete e[r];return e},createEvents=function(e){var t={};return mix(e,{on:function(e,n){t[e]=t[e]||[],t[e].push(n)},fire:function(n,r){r=r||{},mix(r,{type:n,target:e,preventDefault:function(){r.returnValue=!1}});var i=t[n]||[];for(var s=0;s<i.length;s++)i[s](r);return r.returnValue!==!1}}),e},addEvent=function(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&(e["e"+t+n]=n,e.attachEvent("on"+t,function(){e["e"+t+n].call(e,window.event)}))},usePM=typeof window.postMessage!="undefined";mix(XPC.prototype,{_initialize:function(){function t(t){var n={};try{n=JSON.parse(t)}catch(r){}e.fire("message",n)}var e=this;createEvents(this);if(usePM)addEvent(window,"message",function(n){n.origin===e.options.origin&&t(n.data)});else{var n=window.name;setInterval(function(){window.name!=n&&window.name!=""&&(n=window.name,t(n))},50)}},send:function(e){var t=this.options,n=t.win||(t.isParent?window.frames[t.iframeName]:parent);if(!n)throw new Error("XPC","can not find window!");var r={data:e,ts:(+(new Date)).toString(36)};r=JSON.stringify(r),usePM?n.postMessage(r,t.origin):n.name=r}},!0),window.XPC=XPC})();(function(){function i(){QHPass.init({src:"pcw_socube",domainList:["so.com","360.cn","360.com"],signIn:{types:["normal","mobile","qrcode"]}}),u()&&QHPass.setConfig("signIn.thirdPart.providers",[]),n=new e({origin:t.origin||"*",iframeName:t.name}),n.on("message",function(e){e.data&&o(e.data)}),n.send({action:"ready"})}function s(){QHPass.events.on("close.*",function(){n.send({action:"panelHide"})}),QHPass.events.on("afterShow.signUp",function(e){$(".quc-panel-close").on("click",function(){n.send({action:"panelHide"})})})}function o(e){r[e.action](e.data)}function u(){var e=window.navigator.userAgent.toLowerCase(),t=/(chrome)\/(\d+)/ig,n={};return e.replace(t,function(e,t,r){n[t]||(n[t]=r)}),n.chrome&&n.chrome>=84?!0:!1}var e=window.XPC,t={origin:location.protocol+"//"+location.hostname,name:"login-proxy"},n,r={login:function(){QHPass.signIn(function(e){n.send({action:"userinfo",data:e}),n.send({action:"panelHide"})})},signUp:function(){QHPass.signUp(function(e){n.send({action:"userinfo",data:e}),n.send({action:"panelHide"})})},getUserInfo:function(){QHPass.getUserInfo(function(e){n.send({action:"userinfo",data:e})})}};s(),i()})();